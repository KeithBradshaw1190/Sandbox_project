{"remainingRequest":"/Users/keith.bradshaw/Documents/projects/pl_frontend/private_location_app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/keith.bradshaw/Documents/projects/pl_frontend/private_location_app/src/components/AllBooks.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/keith.bradshaw/Documents/projects/pl_frontend/private_location_app/src/components/AllBooks.vue","mtime":1614534292814},{"path":"/Users/keith.bradshaw/Documents/projects/pl_frontend/private_location_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/keith.bradshaw/Documents/projects/pl_frontend/private_location_app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/keith.bradshaw/Documents/projects/pl_frontend/private_location_app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/keith.bradshaw/Documents/projects/pl_frontend/private_location_app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFsbEJvb2tzIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWxsQm9va3M6IG51bGwsCiAgICAgIGNoYW5nZUV4aXN0OiBmYWxzZSwKICAgICAgY2hhbmdlSWQ6IG51bGwsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Qm9va3MoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEJvb2tzKCkgewogICAgICBjb25zb2xlLmxvZygiR2V0dGluZyBib29rcyIpOwogICAgICBheGlvcwogICAgICAgIC5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMy9hcGkvYm9va3Mvbm9Eb3dubG9hZCIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiQm9va3MgUmV0cmlldmVkIFN1Y2Nlc3NmdWxseSI7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICJCb29rcyBSZXRyaWV2ZWQgU3VjY2Vzc2Z1bGx5OiAiICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhpcy5hbGxCb29rcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBSZXRyaWV2aW5nIEJvb2tzOiAiICsgSlNPTi5zdHJpbmdpZnkoZSkpOwogICAgICAgICAgdGhpcy5hbGxCb29rcyA9IG51bGw7CiAgICAgICAgfSk7CiAgICB9LAogICAgbGlrZUJvb2soaWQpIHsKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICBjb25zb2xlLmxvZygiTGlraW5nIGJvb2sgIiArIGlkKTsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAzL2FwaS9ib29rLXVwZGF0ZS9saWtlcyIsIHsKICAgICAgICAgIGJvb2tJZDogaWQsCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0Qm9va3MoKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIkVycm9yIFJldHJpZXZpbmcgQm9va3M6ICIgKyBKU09OLnN0cmluZ2lmeShlKSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2hvd1NhdmVDaGFuZ2VCdXR0b24oaWQpIHsKICAgICAgdGhpcy5jaGFuZ2VFeGlzdCA9IHRydWU7CiAgICAgIHRoaXMuY2hhbmdlSWQgPSBpZDsKICAgIH0sCiAgICBzYXZlQ2hhbmdlcygpIHsKICAgICAgdGhpcy5jaGFuZ2VFeGlzdCA9IGZhbHNlOwogICAgfSwKICAgIGRlbGV0ZUJvb2soaWQpIHsKICAgICAgYXhpb3MKICAgICAgICAuZGVsZXRlKGBodHRwOi8vbG9jYWxob3N0OjMwMDMvYXBpL2Jvb2svJHtpZH1gKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5hbGxCb29rcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBSZXRyaWV2aW5nIEJvb2tzOiAiICsgSlNPTi5zdHJpbmdpZnkoZSkpOwogICAgICAgIH0pOwogICAgfSwKICAgIGRvd25sb2FkQm9va3MoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJEb3dubG9hZGluZyBib29rcyIpOwoKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjMwMDMvYXBpL2Jvb2tzL2Rvd25sb2FkIiwgewogICAgICAgICAgcmVzcG9uc2VUeXBlOiAiYXJyYXlidWZmZXIiLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbcmVzcG9uc2UuZGF0YV0sIHsgdHlwZTogImFwcGxpY2F0aW9uL2pzb24iIH0pOwogICAgICAgICAgbGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICBsaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSAiQm9va0xpc3QuanNvbiI7CiAgICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBkb3dubG9hZGluZyBCb29rczogIiArIEpTT04uc3RyaW5naWZ5KGUpKTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["AllBooks.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AllBooks.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div class=\"user-create\">\n    <div class=\"cover-container d-flex h-100 p-3 mx-auto flex-column\">\n      <main role=\"main\" class=\"inner cover\">\n        <h1 class=\"cover-heading\">\n          Favourite books <br />\n          <button\n            class=\"btn btn-sm btn-dark mt-4 mb-4\"\n            v-if=\"allBooks != null\"\n            @click=\"downloadBooks()\"\n          >\n            Download book list\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              fill=\"currentColor\"\n              class=\"bi bi-download\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path\n                d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"\n              />\n              <path\n                d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"\n              />\n            </svg>\n          </button>\n        </h1>\n\n        <div class=\"container\">\n          <div class=\"row text-center\" v-if=\"allBooks != null\">\n            <!-- Book -->\n            <div\n              class=\"col-xl-4 col-sm-6 mb-5\"\n              v-for=\"book in allBooks\"\n              v-bind:key=\"book.id\"\n            >\n              <div class=\"bg-white rounded shadow py-4 px-5\">\n                <img\n                  v-bind:src=\"book.imgUrl\"\n                  alt=\"\"\n                  width=\"200\"\n                  class=\"img-fluidmb-3 img-thumbnail shadow-sm mb-3\"\n                />\n                <h5 class=\"mb-0\">{{ book.bookName }}</h5>\n                <span class=\"small text-uppercase text-muted\"\n                  >{{ book.rating }} Out of 5 Rating</span\n                >\n\n                <ul class=\"social mb-0 list-inline mt-3\">\n                  <li\n                    contenteditable\n                    class=\"list-inline-item\"\n                    @change=\"showSaveChangeButton(book._id)\"\n                  >\n                    {{ book.shortDescription }}\n                  </li>\n                </ul>\n                <br />\n                <small>{{ book.likes }} Likes</small>\n                <!-- Like Button -->\n                <button class=\"btn m-1\" v-on:click=\"likeBook(book._id)\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    fill=\"currentColor\"\n                    class=\"bi bi-heart m-0\"\n                    viewBox=\"0 0 16 16\"\n                  >\n                    <path\n                      d=\"M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z\"\n                    ></path>\n                  </svg>\n                  Like\n                </button>\n                <!-- Like Button -->\n                <br />\n              \n                  <div class=\"col-4\">\n                    <button\n                      class=\"btn m-1 btn-sm\"\n                      @click=\"deleteBook(book._id)\"\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"16\"\n                        height=\"16\"\n                        fill=\"currentColor\"\n                        class=\"bi bi-x-square\"\n                        viewBox=\"0 0 16 16\"\n                      >\n                        <path\n                          d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"\n                        />\n                        <path\n                          d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"\n                        />\n                      </svg>\n                      Delete\n                    </button>\n             \n                </div>\n              </div>\n            </div>\n            <!-- End -->\n          </div>\n\n          <div class=\"text-center mt-4\" v-if=\"allBooks == null\">\n            <p class=\"lead\">No Books added yet!</p>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"AllBooks\",\n  data() {\n    return {\n      allBooks: null,\n      changeExist: false,\n      changeId: null,\n    };\n  },\n  created() {\n    this.getBooks();\n  },\n  methods: {\n    getBooks() {\n      console.log(\"Getting books\");\n      axios\n        .get(\"http://localhost:3003/api/books/noDownload\")\n        .then((response) => {\n          if (response.status == 200) {\n            this.message = \"Books Retrieved Successfully\";\n            console.log(\n              \"Books Retrieved Successfully: \" + JSON.stringify(response.data)\n            );\n            this.allBooks = response.data;\n          }\n        })\n        .catch((e) => {\n          console.log(\"Error Retrieving Books: \" + JSON.stringify(e));\n          this.allBooks = null;\n        });\n    },\n    likeBook(id) {\n      console.log(id);\n      console.log(\"Liking book \" + id);\n      axios\n        .post(\"http://localhost:3003/api/book-update/likes\", {\n          bookId: id,\n        })\n        .then((response) => {\n          if (response.status == 200) {\n            this.getBooks();\n          }\n        })\n        .catch((e) => {\n          console.log(\"Error Retrieving Books: \" + JSON.stringify(e));\n        });\n    },\n    showSaveChangeButton(id) {\n      this.changeExist = true;\n      this.changeId = id;\n    },\n    saveChanges() {\n      this.changeExist = false;\n    },\n    deleteBook(id) {\n      axios\n        .delete(`http://localhost:3003/api/book/${id}`)\n        .then((response) => {\n          console.log(response);\n          if (response.status == 200) {\n            this.allBooks = response.data;\n          }\n        })\n        .catch((e) => {\n          console.log(\"Error Retrieving Books: \" + JSON.stringify(e));\n        });\n    },\n    downloadBooks() {\n      console.log(\"Downloading books\");\n\n      axios\n        .get(\"http://localhost:3003/api/books/download\", {\n          responseType: \"arraybuffer\",\n        })\n        .then((response) => {\n          console.log(response);\n\n          let blob = new Blob([response.data], { type: \"application/json\" });\n          let link = document.createElement(\"a\");\n          link.href = window.URL.createObjectURL(blob);\n          link.download = \"BookList.json\";\n          link.click();\n        })\n        .catch((e) => {\n          console.log(\"Error downloading Books: \" + JSON.stringify(e));\n        });\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.btn-circle {\n  width: 45px;\n  height: 45px;\n  line-height: 45px;\n  text-align: center;\n  padding: 0;\n  border-radius: 50%;\n}\n\n.btn-circle i {\n  position: relative;\n  top: -1px;\n}\n\n.btn-circle-sm {\n  width: 35px;\n  height: 35px;\n  line-height: 35px;\n  font-size: 0.9rem;\n}\n\n.btn-circle-lg {\n  width: 55px;\n  height: 55px;\n  line-height: 55px;\n  font-size: 1.1rem;\n}\n\n.btn-circle-xl {\n  width: 70px;\n  height: 70px;\n  line-height: 70px;\n  font-size: 1.3rem;\n}\n</style>\n"]}]}